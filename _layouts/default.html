<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <meta name="google-site-verification" content="Xmj6mr-KpRASoLmzEKEyMUxyMa5pTG8jb2VxwbJsn_E" />
    <title>CLAIRify</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap" rel="stylesheet">
    </head>
  <body>
    
    <header class="page-header" role="banner">
      <h1 class="project-name" style="font-weight: bold;">CLAIRify</h1>
      <h3>Errors are Useful Prompts: Instruction Guided Task Programming with Verifier-Assisted Iterative Prompting</h3>
      <h3><a href="https://scholar.google.ca/citations?user=OYd3hjYAAAAJ&hl=en&oi=ao">Marta Skreta</a>*<sup>1,2</sup>, <a href="https://www.cs.toronto.edu/~naruki/">Naruki Yoshikawa</a>*<sup>1,2</sup>, Sebastian Arellano-Rubach<sup>3</sup>, Zhi Ji<sup>1</sup>, <a href="https://scholar.google.com/citations?user=MMdBMTwAAAAJ&hl=da">Lasse Bjørn Kristensen</a><sup>1</sup>, <a href="https://kouroshd.github.io">Kourosh Darvish</a><sup>1,2</sup>, <br> <a href="https://www.matter.toronto.edu">Alán Aspuru-Guzik</a><sup>1,2,4</sup>, <a href="https://www.cs.toronto.edu/~florian/">Florian Shkurti</a><sup>1,2,4</sup>, <a href="https://animesh.garg.tech">Animesh Garg</a><sup>1,2,4,5</sup></h2>
      <h4>1: University of Toronto, 2: Vector Institute for Artificial Intelligence, 3: University of Toronto Schools, <br> 4: Accleration Consortium, 5: NVIDIA</h4>
            
            
      <section>
      <a href="https://arxiv.org/abs/2303.14100" class="btn">
        <img width="45" alt="ArXiv logo 2022" src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/ArXiv_logo_2022.svg/512px-ArXiv_logo_2022.svg.png" style="margin-bottom: -0.4rem;"><!-- <i class="fas fa-file-pdf"></i> Font Awesome fontawesome.com -->
        arXiv
      </a>
      <a href="https://youtu.be/-87yrXytluw" class="btn">
        <span class="icon">
          <svg class="svg-inline--fa fa-youtube fa-w-18" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="youtube" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" data-fa-i2svg=""><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg><!-- <i class="fab fa-youtube"></i> Font Awesome fontawesome.com -->
        </span>
        Youtube
      </a>
      <a href="https://github.com/ac-rad/xdl-generation" class="btn">
        <span class="icon">
          <svg class="svg-inline--fa fa-github fa-w-16" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" data-fa-i2svg=""><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><!-- <i class="fab fa-github"></i> Font Awesome fontawesome.com -->
        </span>
        GitHub
      </a>
    </section>
    </header>
    
      <main>
        <div align="center">
	   <iframe width="560" height="315" src="https://www.youtube.com/embed/-87yrXytluw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="">
           </iframe>
	</div>
        <h2>Motivation</h2>
        <p>We introduce CLAIRify: a novel approach that combines automatic iterative prompting with program verification to ensure programs written in domain-specific languages are syntactically valid and incorporate environment constraints.</p>
        
        
        <div class="img-container">
          <div class="img-box"><img src="media/bakingsoda-opt.gif" width="1700" height="1090"/></div>
        </div>
        
        
        <h2>Problems with using large language models for task-plan generation:</h2>
        <p>
          <ul> 
            <li>Poor performance for data-scarce domain-specific languages (DSLs). We demonstrate that for XDL, a language used in robotics for chemistry lab automation, vanilla zero-shot prompting of LLMs produces erroneous task plans.
                
                <div class="img-container">
                  <div class="img-box"><img src="media/prob1.png" width="4912" height="2000"/></div>
                </div>
                
            </li>
            <li>Lack of task-plan verification. Generated task plans might not be executable by a robot because they are syntactically incorrect and/or incorporate resources not present in the environment. 
              
                <div class="img-container">
                  <div class="img-box"><img src="media/prob2.png" width="5111" height="2000"/></div>
                </div>
               
            </li>
          </ul>
        </p>
        
        
        <h2>Our solution: CLAIRify</h2>
        <p>CLAIRify is a framework that translates natural language into a domain-specific structured task plan using an automated iterative verification technique to ensure the plan is syntactically valid in the target DSL. It
          also takes into account environment constraints if provided. </p>
        
        
        <div class="img-container">
          <div class="img-box"><img src="media/model-opt.gif" height="1920" width="1080"/></div>
        </div>
        
    
        
        <h2>Example of iterative prompting with CLAIRify</h2>
        <p>Here, we demonstrate an interaction between the generator and the verifier to generate a XDL task plan.</p>
        
        
        <div class="img-container">
          <div class="img-box"><img src="media/iterations-opt.gif" width="2000" height="1200"/></div>
        </div>
        
    
        
        <h2>Results</h2>
        <p>We show the performance of CLAIRify compared to a state-of-the-art baseline on two datasets we curated [1] Chem-RnD (organic chemistry synthesis protocols) and [2] Chem-EDU (household chemistry experiments exectuable by our robot). We report the number of plans successfully generated, as well as expert preference (given two anonymized plans for the same instruction, we asked experts to pick their preferred plan or classify them as equally good). The data can be accessed <a href="https://github.com/ac-rad/xdl-generation/tree/master/data">here</a>.  </p>
        
        
        <div class="img-container">
          <div class="img-box"><img src="media/results.png" width="5851" height="2000"/></div>
        </div>
        
    
    
        <h2>Robot demo</h2>
        <p>To execute our generated plans on a real robot, we integrate our pipeline with a Task and Motion Planner. We show two robot experiments from the Chem-EDU dataset: </p>
        
        <p>
          <ul> 
            <li>pH experiment: mixing baking soda with red cabbage solution
                
                <div class="img-container">
                  <div class="img-box"><img src="media/bakingsoda-opt.gif" width="1700" height="1090"/></div>
                </div>
                
            </li>
            <li>Food preparation: making lemonade
              
                 <div class="img-container">
                  <div class="img-box"><img src="media/lemonade-opt.gif" width="1700" height="1200"/></div>
                </div> 
               
            </li>
          </ul>
        </p>

        
        <h2>Contributors</h2>
        <div class="authors">
          <section>
	    <a class="img" href="https://scholar.google.ca/citations?user=OYd3hjYAAAAJ&hl=en&oi=ao">
            <img src="https://user-images.githubusercontent.com/29033751/227172683-2aba2c64-460b-4432-a1f4-5a62e2214857.jpeg" alt="pfp" width="100px" height="100px" style="display: center">
            </a>
            <br>
            <span>Marta Skreta</span>
          </section>
        
          <section>
            <img src="https://user-images.githubusercontent.com/29033751/227751145-ad3bfcd8-04f9-440a-968c-c15c93182632.jpeg" alt="pfp" width="100px" height="100px" style="display: center">
            <br>
            <span>Zhi Ji</span>
          </section>
          
           <section>
            <a class="img" href="https://www.matter.toronto.edu">
            <img src="https://user-images.githubusercontent.com/29033751/227172993-78ecc09b-860e-4973-ab35-a8fac7cd6e38.jpeg" alt="pfp" width="100px" height="100px" style="display: center">
            </a>
            <br>
            <span>Alán Aspuru-Guzik</span>
          </section>
        
          
        
          <section>
            <a class="img" href="https://www.cs.toronto.edu/~naruki/">
            <img src="https://user-images.githubusercontent.com/29033751/227172740-7e57c947-1675-45ce-a3a4-d10035827ae6.jpeg" alt="pfp" width="100px" height="100px" style="display: center">
            </a>
            <br>
            <span>Naruki Yoshikawa</span>
          </section>
          
          
        
          <section>
            <a class="img" href="https://scholar.google.com/citations?user=MMdBMTwAAAAJ&hl=da">
            <img src="https://user-images.githubusercontent.com/29033751/227751146-f0e3256c-188c-4557-a640-adac1c1879a2.jpeg" alt="pfp" width="100px" height="100px" style="display: center">
            </a>
            <br>
            <span>Lasse Bjørn Kristensen</span>
          </section>
          
          <section>
            <a class="img" href="https://www.cs.toronto.edu/~florian/">
            <img src="https://user-images.githubusercontent.com/29033751/227173034-5adec089-7fdb-4ec3-8522-ec62ab55076f.jpeg" alt="pfp" width="100px" height="100px" style="display: center">
            </a>
            <br>
            <span>Florian Shkurti</span>
          </section>
          
           <section>
            <img src="https://user-images.githubusercontent.com/29033751/227751142-09fdd6c7-f2b9-447d-8a79-125ae269720e.jpeg" alt="pfp" width="100px" height="100px" style="display: center">
            <br>
            <span>Sebastian Arellano-Rubach</span>
          </section>
        
          <section>
            <a class="img" href="https://kouroshd.github.io">
            <img src="https://user-images.githubusercontent.com/29033751/227172889-fdc71650-797d-4dee-aa9a-9ff676a80305.jpeg" alt="pfp" width="100px" height="100px" style="display: center">
            </a>
            <br>
            <span>Kourosh Darvish</span>
          </section>
        
        
          <section>
            <a class="img" href="https://animesh.garg.tech">
            <img src="https://user-images.githubusercontent.com/29033751/227173092-c1de8f5c-a0e3-4209-86c9-da205da83d90.jpeg" alt="pfp" width="100px" height="100px" style="display: center">
            </a>
            <br>
            <span>Animesh Garg</span>
          </section>
        </div>      
          
      </main>
  </body>
</html>
